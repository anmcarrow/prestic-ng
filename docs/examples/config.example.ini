#########################################################################
# SIMPLE PROFILE EXAMPLE (everything in one block)
#########################################################################

[simple-backup]
description = "Simple backup without inheritance"
repository = sftp://username@your-backup-server.example.com:23/backups/simple
password-file = /path/to/password/file
key-hint = 12345678
notifications = True
verbose = 2
schedule = daily at 01:00
command = backup
args =
    /home/user/documents
    --exclude="*.tmp"
    --tag=documents

#########################################################################
# SPLIT PROFILE EXAMPLE (base profile + tasks with inheritance)
#########################################################################

[mailboxes]
description = "Base profile for mail backups in remote SFTP storage"
repository = sftp://username@your-backup-server.example.com:23/backups/mail
password-file = /path/to/password/file
key-hint = 12345678

[mail-backup]
inherit = mailboxes
description = "Backup downloaded mailboxes"
notifications = True
verbose = 3
schedule = daily at 02:02
prune-logs-after = 14
command = backup
args =
    /path/to/mail/folder
    --iexclude="*.lock"
    --iexclude=".Trash-*"
    --tag=mail

[mail-prune]
inherit = mailboxes
schedule = daily at 02:46
description = "Prune outdated snapshots"
notifications = True
verbose = 3
command = forget
args =
    --prune
    --keep-daily 7
    --keep-weekly 4
    --keep-monthly 12
    --keep-yearly 100

[mail-check]
inherit = mailboxes
schedule = weekly at 04:46
notifications = True
verbose = 3
command = check

#########################################################################
# S3 STORAGE EXAMPLE (AWS credentials via environment variables)
#########################################################################

[s3-base]
description = "Base profile for S3 bucket backups"
repository = s3:s3.amazonaws.com/my-backup-bucket/dropbox
env.AWS_ACCESS_KEY_ID = YOUR_ACCESS_KEY_ID
env.AWS_SECRET_ACCESS_KEY = YOUR_SECRET_ACCESS_KEY
verbose = 2

[s3-dropbox-backup]
inherit = s3-base
description = "Backup Dropbox folder to S3"
notifications = True
schedule = daily at 03:15
prune-logs-after = 30
command = backup
args =
    /path/to/dropbox/folder
    --iexclude="*.lock"
    --iexclude=".Trash-*"
    --tag=dropbox

[s3-dropbox-prune]
inherit = s3-base
schedule = weekly at 02:46
description = "Prune outdated snapshots from S3"
notifications = True
command = forget
args =
    --prune
    --keep-daily 7
    --keep-weekly 4
    --keep-monthly 6

#########################################################################
# AZURE BLOB STORAGE EXAMPLE (with keyring password)
#########################################################################

[azure-seafile]
description = "Base profile for Azure Blob Storage backups"
repository = azure:mycontainer:/seafile
env.AZURE_ACCOUNT_NAME = mystorageaccount
env.AZURE_ACCOUNT_KEY = YOUR_AZURE_ACCOUNT_KEY
password-keyring = azure-seafile
cpu-priority = low
io-priority = low

[seafile-backup]
inherit = azure-seafile
description = "Backup Seafile data to Azure"
notifications = True
verbose = 2
schedule = daily at 04:15
prune-logs-after = 21
command = backup
args =
    /path/to/seafile/folder
    --iexclude="*.lock"
    --iexclude=".Trash-*"
    --tag=seafile

[seafile-maintenance]
inherit = azure-seafile
description = "Combined prune and check task"
notifications = True
schedule = weekly at 02:00
command = forget
args =
    --prune
    --keep-daily 14
    --keep-weekly 8
    --keep-monthly 6
    --keep-yearly 2

#########################################################################
# LOCAL NAS STORAGE EXAMPLE (with password-command)
#########################################################################

[local-nas]
description = "Base profile for local NAS storage"
repository = /mnt/nas/backups/myhost/gdrive
password-command = cat /secure/location/password.txt
wait-for-lock = 300
limit-upload = 5120
limit-download = 5120

[gdrive-daily]
inherit = local-nas
description = "Daily Google Drive backup to NAS"
notifications = True
verbose = 1
schedule = daily at 05:11
prune-logs-after = 7
command = backup
args =
    /path/to/gdrive/folder
    --iexclude="*.lock"
    --iexclude=".Trash-*"
    --exclude-file=/home/user/.backup-excludes
    --tag=gdrive


#########################################################################
# MULTIPLE TASKS EXAMPLE (multiple backups from one base profile)
#########################################################################

[home-base]
description = "Base profile for all home folder backups"
repository = sftp://username@your-backup-server.example.com:23/backups/home
password-file = /path/to/password/file
key-hint = fedcba98
notifications = True
verbose = 2
cpu-priority = low

[dotfiles-backup]
inherit = home-base
description = "Backup user configuration files"
schedule = daily at 04:11
prune-logs-after = 10
command = backup
args =
    /home/user/.config
    --exclude-file=/home/user/.backup-excludes
    --tag=dotfiles

[devfiles-backup]
inherit = home-base
description = "Backup development projects"
schedule = daily at 05:11
prune-logs-after = 10
command = backup
args =
    /home/user/dev
    --iexclude="*.lock"
    --iexclude=".Trash-*"
    --iexclude=".vagrant.d"
    --exclude="*/node_modules"
    --exclude="*/.git"
    --tag=devfiles

[vm-backup]
inherit = home-base
description = "Backup virtual machines"
schedule = weekly at 03:11
prune-logs-after = 30
command = backup
args =
    /home/user/virtualbox
    --iexclude="*.lock"
    --tag=virtualbox

[home-maintenance]
inherit = home-base
schedule = daily at 06:00
description = "Daily maintenance for all home backups"
command = forget
args =
    --prune
    --keep-daily 7
    --keep-weekly 4
    --keep-monthly 12
    --keep-yearly 3

#########################################################################
# ALIAS PROFILE EXAMPLE (profile pointing to another profile)
#########################################################################

[default]
# This alias makes 'prestic' without arguments run the media-backup profile
inherit = media-backup

[local-media]
description = "Base profile for media files on local NAS"
repository = /mnt/nas/backups/workstation/media
password-file = /path/to/password/file
io-priority = idle
limit-upload = 10240

[media-backup]
inherit = local-media
description = "Backup user media files"
notifications = True
verbose = 1
schedule = weekly at 01:00
prune-logs-after = 60
command = backup
args =
    /path/to/media/folder
    /path/to/photos
    --exclude="*.tmp"
    --exclude="Thumbs.db"
    --tag=media

[media-prune]
inherit = local-media
description = "Long-term retention for media backups"
notifications = False
schedule = monthly at 03:00
command = forget
args =
    --prune
    --keep-daily 30
    --keep-weekly 12
    --keep-monthly 24
    --keep-yearly 10

#########################################################################
# ADVANCED EXAMPLE (custom restic flags and environment variables)
#########################################################################

[advanced-backup]
description = "Advanced configuration with custom flags"
repository = rest:https://backup.example.com:8000/myrepo
password-keyring = advanced-repo
verbose = 3
notifications = True
schedule = hourly at *:30
prune-logs-after = 7
executable = /usr/local/bin/restic
cache-dir = /tmp/restic-cache
wait-for-lock = 600
cpu-priority = normal
io-priority = normal
limit-upload = 2048

# Custom environment variables
env.RESTIC_COMPRESSION = auto
env.RESTIC_PACK_SIZE = 16

# Custom restic flags
flag.json = true
flag.no-cache = false
flag.cacert = /path/to/ca-cert.pem

command = backup
args =
    /critical/data
    --exclude-caches
    --one-file-system
    --tag=critical
    --tag=hourly
